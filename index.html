<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Creating and releasing a Play 2 module by sant0s</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Creating and releasing a Play 2 module</h1>
      <h2 class="project-tagline"></h2>
      <a href="https://github.com/sant0s/play2-module-howto" class="btn">View on GitHub</a>
      <a href="https://github.com/sant0s/play2-module-howto/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/sant0s/play2-module-howto/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="creating-and-releasing-a-play-2-module" class="anchor" href="#creating-and-releasing-a-play-2-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>Creating and releasing a Play 2 module</h1>

<p>The sections below describe the steps required to create and release a Play 2 module along with a corresponding sample application:</p>

<ul>
<li>The steps are based on how <a href="http://sant0s.github.io/play2-chart/" target="_blank">Play 2 Chart</a> was created</li>
<li>Some steps may be redundant or missing</li>
<li>The order of the steps is not strict i.e. some steps may be executed earlier/later than specified</li>
<li>Some steps may vary according to user preferences (e.g. preferred text editor)</li>
<li>
<code>&lt;&gt;</code> refers to a placeholder (e.g. <code>&lt;module&gt;</code> is a placeholder for a module name)</li>
<li>Linux, Eclipse and Play 2.3 are assumed to be part of the development environment

<ul>
<li>These instructions may also work for Play versions above 2.4 (not tested)</li>
</ul>
</li>
<li>UNIX commands are assumed to take place on the path determined by the most recently executed <code>cd</code> command</li>
</ul>

<h2>
<a id="create-module" class="anchor" href="#create-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create module</h2>

<ol>
<li>Create module: <code>activator new</code>

<ul>
<li>Template: play-java</li>
<li>Name: <code>&lt;module&gt;</code>

<ul>
<li>In Play 1, the module name must match regex <code>[a-zA-Z]+</code>
</li>
</ul>
</li>
</ul>
</li>
<li>Move module to <code>project-code</code> subdirectory

<ol>
<li>
<code>mkdir project-code</code>: this is the module's directory/Git repository</li>
<li><code>mv * project-code</code></li>
<li><code>cd project-code</code></li>
</ol>
</li>
<li>Delete unnecessary content/files/directories:

<ol>
<li>
<code>vi conf/application.conf</code>: delete all content</li>
<li>
<code>vi project/plugins.sbt</code>: remove unnecessary plugins</li>
<li>Remove unnecessary files/directories. Examples:

<ul>
<li>
<code>public</code> or its subdirectories</li>
<li><code>test/resources</code></li>
</ul>
</li>
</ol>
</li>
<li>
<code>vi .gitignore</code>: include files specified in <a href="#appendixa">Appendix A</a>
</li>
<li><code>rm conf/routes</code></li>
<li>Build module

<ol>
<li>
<code>activator</code>

<ol>
<li><code>run</code></li>
<li>Access <code>localhost:9000</code> on a browser and fix any compilation issues</li>
</ol>
</li>
</ol>
</li>
<li>Eclipsify module

<ol>
<li>
<code>activator</code>

<ol>
<li><code>eclipse</code></li>
</ol>
</li>
</ol>
</li>
<li>Import module project into Eclipse:

<ul>
<li><code>File -&gt; Import -&gt; General -&gt; Existing Project into Workspace</code></li>
</ul>
</li>
<li>Set up module

<ol>
<li>Delete README</li>
<li>Create README.md</li>
<li>Set name, version (start with <code>0.1.0</code>), organisation and dependencies in <code>build.sbt</code>
</li>
</ol>
</li>
<li>Implement the module

<ol>
<li>Delete the <code>views</code> package under <code>app</code> if the module won't provide views</li>
<li>Delete the <code>controllers</code> package under <code>app</code> if the module won't provide controllers</li>
<li>Add code to package <code>&lt;package&gt;.&lt;project&gt;</code> under <code>app</code>
</li>
<li>Write and execute tests: <code>activator test</code>
</li>
<li>Check that no code problems are reported by Eclipse</li>
<li>Check that no unnecessary logging is generated by the module (search the code for <code>Logger</code>)</li>
</ol>
</li>
<li>Document the module

<ol>
<li>Document all API methods using Javadoc</li>
<li>
<code>activator publishLocal</code>: Javadoc is generated under <code>target</code>
</li>
<li>Check that:

<ol>
<li>All public API methods are documented</li>
<li>No module related Javadoc errors are found in log files (under the <code>logs</code> directory)</li>
</ol>
</li>
<li>Add full documentation to <code>README.md</code>
</li>
</ol>
</li>
<li>Publish module to local Ivy repository

<ol>
<li>
<code>activator</code>

<ol>
<li><code>clean</code></li>
<li>
<code>publishLocal</code>: the module gets published under <code>~/.ivy2/local</code>
</li>
</ol>
</li>
</ol>
</li>
</ol>

<h2>
<a id="create-module-sample-application" class="anchor" href="#create-module-sample-application" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create module sample application</h2>

<ol>
<li>Create a directory for sample applications at the same level as <code>project-code</code>: <code>mkdir samples</code>
</li>
<li><code>cd samples</code></li>
<li>
<code>activator new</code>

<ul>
<li>Template: <code>play-java</code>
</li>
<li>Name: <code>&lt;module&gt;-sample</code>
</li>
</ul>
</li>
<li><code>cd &lt;module&gt;-sample</code></li>
<li>Configure the sample application

<ol>
<li>Delete README</li>
<li>Add full documentation to README.md</li>
<li>Set name, version (start with 0.1.0, it should be in sync with the module one) and dependency to the module in <code>build.sbt</code>
</li>
</ol>
</li>
<li>Delete unnecessary files/directories. Examples:

<ul>
<li>
<code>public</code> or its subdirectories</li>
<li><code>test/resources</code></li>
</ul>
</li>
<li>
<code>vi .gitignore</code> and include files specified in <a href="#appendixa">Appendix A</a>
</li>
<li>Eclipsify module sample application

<ol>
<li>
<code>activator</code>

<ol>
<li><code>eclipse</code></li>
</ol>
</li>
</ol>
</li>
<li>Import module sample project into Eclipse:

<ul>
<li><code>File -&gt; Import -&gt; General -&gt; Existing Project into Workspace</code></li>
</ul>
</li>
<li>Implement the module

<ol>
<li>Add code to under <code>app</code>
</li>
<li>Write and execute tests: <code>activator test</code>
</li>
<li>Test manually at <code>localhost:9000</code>
</li>
<li>Check that no code problems are reported by Eclipse</li>
</ol>
</li>
</ol>

<h2>
<a id="release-module" class="anchor" href="#release-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>Release module</h2>

<ol>
<li>Test module before publishing to GitHub

<ol>
<li>Remove module from <code>.ivy2/local</code> and <code>.ivy2/cache</code>
</li>
<li><code>cd project-code</code></li>
<li>
<code>activator</code>

<ol>
<li>clean</li>
<li>reload</li>
<li>update</li>
<li>Publish locally: publishLocal

<ol>
<li>check that module is at <code>.ivy2/local</code> and not at <code>.ivy2/cache</code>
</li>
<li>Check that no unnecessary files/directories exist under `~/.ivy2/local//. If any, remove them and republish. Examples of unnecessary files/directories include:

<ul>
<li>Files: <code>.classpath</code>, <code>.project</code>, <code>.gitignore</code>
</li>
<li>Directories: <code>.settings</code>, <code>eclipse</code>, <code>javadoc</code>, <code>logs</code>, <code>.git</code>, empty directories (e.g. public)</li>
</ul>
</li>
</ol>
</li>
<li>test: all tests should pass</li>
</ol>
</li>
</ol>
</li>
<li>Test module sample application against locally published module

<ol>
<li><code>cd samples/&lt;module&gt;-sample</code></li>
<li>
<code>activator</code>

<ol>
<li><code>clean</code></li>
<li><code>reload</code></li>
<li><code>update</code></li>
<li>
<code>test</code>: all tests should be ok</li>
<li>
<code>run</code> and test manually</li>
</ol>
</li>
</ol>
</li>
<li>Create a release repository and push it to GitHub

<ol>
<li>Create a directory for the release repository outside the project one: <code>mkdir ~/release</code>
</li>
<li>Add built module to it: <code>cp -rv ~/.ivy2/local/&lt;package&gt;/&lt;project*&gt; ~/release</code>
</li>
<li><code>cd release</code></li>
<li>Add/commit release files to local Git repository: see <a href="#appendixb">Appendix B</a>
</li>
<li>Create GitHub release repository: see <a href="#appendixc">Appendix C</a>
</li>
<li>Push release files from local Git repository to GitHub release repository: see <a href="#appendixd">Appendix D</a>
</li>
</ol>
</li>
<li>Test module sample application against GitHub published module

<ol>
<li>Remove module from .ivy2/local and .ivy2/cache</li>
<li><code>cd samples/&lt;module&gt;-sample</code></li>
<li>
<code>vi build.sbt</code> and include GitHub release repository in <code>resolvers</code>
</li>
<li>
<code>activator</code>

<ol>
<li><code>clean</code></li>
<li><code>reload</code></li>
<li><code>update</code></li>
<li>
<code>test</code>: all tests should be ok</li>
<li>
<code>run</code> and test manually</li>
</ol>
</li>
</ol>
</li>
<li>Publish module in GitHub

<ol>
<li>Add/commit module files to local Git repository: see <a href="#appendixb">Appendix B</a>
</li>
<li>Create GitHub module repository: see <a href="#appendixc">Appendix C</a>
</li>
<li>Push module files from local Git repository to GitHub module repository: see <a href="#appendixd">Appendix D</a>
</li>
</ol>
</li>
<li>Publish module sample in GitHub

<ol>
<li>Add/commit module sample files to local Git repository: see <a href="#appendixb">Appendix B</a>
</li>
<li>Create GitHub module sample repository: see <a href="#appendixc">Appendix C</a>
</li>
<li>Push module sample files from local Git repository to GitHub module sample repository: see <a href="#appendixd">Appendix D</a>
</li>
</ol>
</li>
<li>Create module web page in GitHub: see <a href="#appendixe">Appendix E</a>
</li>
<li>Announce the module on the play-framework Google Group using the e-mail template specified in <a href="#appendixf">Appendix F</a>
</li>
</ol>

<h2>
<a id="appendix-a---gitignore" class="anchor" href="#appendix-a---gitignore" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a name="appendixa"></a>Appendix A - <code>.gitignore</code>
</h2>

<p><code>.gitignore</code> should include at least the following files:</p>

<pre><code>    .*
    !.gitignore
    logs
    target
    project/project
    project/target
    bin
    activator
    activator.bat
    activator-launch*
</code></pre>

<p>Other files may be considered for inclusion. Examples include:</p>

<pre><code>    tmp
    .history
    dist
    /out
    /RUNNING_PID
</code></pre>

<h2>
<a id="appendix-b---addcommit-files-to-local-git-repository" class="anchor" href="#appendix-b---addcommit-files-to-local-git-repository" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a name="appendixb"></a>Appendix B - Add/commit files to local Git repository</h2>

<ol>
<li><code>cd &lt;directory&gt;</code></li>
<li><code>git init</code></li>
<li>
<code>vi .gitignore</code>: <a href="#appendixa">Appendix A</a> includes examples of files to be Git ignored</li>
<li>
<code>vi README</code> (recommended for all GitHub repositories)</li>
<li>
<code>vi LICENSE</code> (recommended for all GitHub repositories)</li>
<li>
<code>git status</code>: all files should be unstaged</li>
<li>Add all files recursively: <code>git add .</code>
</li>
<li>
<code>git status</code>: all files should be staged</li>
<li>Commit: <code>git commit -m "&lt;commit message including version&gt;"</code>
</li>
<li>Tag project: <code>git tag &lt;tagname&gt;</code> (e.g. <code>git tag 0.1.0</code>)</li>
<li>
<code>git status</code>: all files should be committed i.e. on the master HEAD of the local copy</li>
</ol>

<h2>
<a id="appendix-c---create-repository-in-github" class="anchor" href="#appendix-c---create-repository-in-github" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a name="appendixc"></a>Appendix C - Create repository in GitHub</h2>

<ol>
<li>Create repository in GitHub:

<ol>
<li>Log in GitHub</li>
<li>New repository</li>
<li>Name: <code>&lt;repository&gt;</code>
</li>
<li>Description (optional): </li>
<li>Public</li>
<li>Create repository</li>
<li>Note the repository SSH URL: <code>git@github.com:&lt;user&gt;/&lt;repository&gt;.git</code>
</li>
</ol>
</li>
</ol>

<h2>
<a id="appendix-d---push-files-from-local-git-repository-to-github" class="anchor" href="#appendix-d---push-files-from-local-git-repository-to-github" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a name="appendixd"></a>Appendix D - Push files from local Git repository to GitHub</h2>

<ol>
<li><code>cd &lt;local repository&gt;</code></li>
<li>Associate GitHub (remote) repository with local one: <code>git remote add origin &lt;repository SSH URL&gt;</code>
</li>
<li>Push files from local repository to GitHub: <code>git push -u origin master</code>
</li>
<li>Push tag to remote: <code>git push origin &lt;tagname&gt;</code> (e.g. <code>git push origin 0.1.0</code>)</li>
</ol>

<h2>
<a id="appendix-e---create-module-web-page-in-github" class="anchor" href="#appendix-e---create-module-web-page-in-github" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a name="appendixe"></a>Appendix E - Create module web page in GitHub</h2>

<ol>
<li>In Github, go to the repository, press Settings and then automatic page generator</li>
<li>Copy/paste the contents of the module's <code>README.md</code> file onto the body</li>
<li>Press "Continue to layouts"</li>
<li>Select layout</li>
<li>Preview page and check that everything's ok</li>
<li>Publish page</li>
</ol>

<h2>
<a id="appendix-f---module-announcement-e-mail-template" class="anchor" href="#appendix-f---module-announcement-e-mail-template" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a name="appendixf"></a>Appendix F - Module announcement e-mail template</h2>

<pre><code>Subject: [play-framework] [2.3.x] Play 2 &lt;module&gt; module
To: play-framework@googlegroups.com

The Play 2 &lt;module&gt; module &lt;module description&gt;. It has been published along with a sample application.

Website: https://&lt;user&gt;.github.io/play2-&lt;module&gt;/
Documentation: https://github.com/&lt;user&gt;/play2-&lt;module&gt;-sample/blob/master/README.md
Short description: The Play 2 &lt;module&gt; module &lt;short description&gt;.
</code></pre>

<h2>
<a id="references" class="anchor" href="#references" aria-hidden="true"><span class="octicon octicon-link"></span></a>References</h2>

<ul>
<li><a href="http://www.objectify.be/wordpress/?p=363" target="_blank">Writing modules for Play 2, part 1: Get something working - Objectify</a></li>
<li><a href="http://www.objectify.be/wordpress/?p=374" target="_blank">Writing modules for Play 2, part 2: Interceptors - Objectify</a></li>
<li><a href="http://www.objectify.be/wordpress/?p=410" target="_blank">Publishing Play 2 modules on github - Objectify</a></li>
<li><a href="http://stackoverflow.com/questions/25101844/how-to-define-resolver-for-dependencies-from-custom-repository-on-github" target="_blank">playframework - How to define resolver for dependencies from custom repository on GitHub? - Stack Overflow</a></li>
</ul>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/sant0s/play2-module-howto">Creating and releasing a Play 2 module</a> is maintained by <a href="https://github.com/sant0s">sant0s</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>

